name: REACT CI

on:
  pull_request:
      branches:
           - main

jobs:
    Jest:
        runs-on: [ubuntu-latest] # ìµœì‹  ìš°ë¶„íˆ¬ ê°€ìƒí™˜ê²½ ì‚¬ìš©
        strategy:
          matrix:
            node-version: [14.x] # ".x" ë¡œ ìµœì‹  ë²„ì „ë„ ì‚¬ìš©í•˜ê³  ì§ì ‘ ë²„ì „ ì§€ì •ë„ ê°€ëŠ¥í•˜ë‹¤
        steps:
          - uses: actions/checkout@v2
          - name: Use Node.js ${{ matrix.node-version }}
            uses: actions/setup-node@v1
            with:
              node-version: ${{ matrix.node-version }}
          - name: ======== YANR INSTALL ========
            run: |
              npm i -g yarn &&
              yarn install --frozen-lockfile
          - name: ======== TEST START ========
            run: |
              yarn test
          - name: ======== TEST FAIL ========
            uses: actions/github-script@v5
            with:
              github-token: ${{secrets.GITHUB_TOKEN}}
              script: |
                const ref = "${{github.ref}}"
                const pull_number = Number(ref.split("/")[2])
                await  github.rest.issues.createComment({
                  issue_number: context.issue.number,
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  body: 'ğŸ”¥ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.'
                })
            if: failure()
          - name: ======== TEST SUCCESS ========
            run: echo successsssssssssssssss!!
            if: success()

